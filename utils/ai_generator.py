import asyncio
import random
from openai import OpenAI, RateLimitError
from utils.config import API_KEY
from utils.logging_config import horo_logger, help_ai_logger

MISTRAL_MODEL = "mistralai/mistral-small-24b-instruct-2501:free"
DEEP_MODEL = "deepseek/deepseek-r1-0528:free"


async def generate_ai_greeting():
    # –¢—É—Ç –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å OpenAI, Gemini, Mistral –∏ —Ç.–¥.
    # return "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –í–∞—à –∫–æ—Ñ–µ –≥–æ—Ç–æ–≤ ‚òï"
    system_prompt = BaristaPrompt.use_system_prompt()
    user_prompt = BaristaPrompt.use_user_prompt()
    help_ai_logger.info('–ì–µ–Ω–µ—Ä–∏—Ä—É—é —Ñ—Ä–∞–∑—É –¥–ª—è –±–∞—Ä–∏—Å—Ç–∞')
    try:
        phrase = await asyncio.to_thread(
            AiAssistent.get_completion,
            system_prompt,
            user_prompt
        )
        print('–ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç –æ—Ç –ò–ò', phrase)
        return phrase

    except Exception as ex:
        help_ai_logger.exception(f'–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ—Ä–∞–∑—ã –¥–ª—è –±–∞—Ä–∏—Å—Ç–∞ - {ex}')


coffee_greetings = {
    "morning": [
        "‚òÄÔ∏è –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ö–∞–∫ –Ω–∞—Å—á—ë—Ç –±–æ–¥—Ä—è—â–µ–≥–æ —ç—Å–ø—Ä–µ—Å—Å–æ —Å —É—Ç—Ä–∞?",
        "üåÑ –í–æ—Å—Ö–æ–¥ —Å–æ–ª–Ω—Ü–∞ –ø–∞—Ö–Ω–µ—Ç —Å–≤–µ–∂–µ—Å–º–æ–ª–æ—Ç—ã–º –∫–æ—Ñ–µ! –ö–∞–∫–æ–π —Å–æ—Ä—Ç –≤—ã–±–µ—Ä–µ—Ç–µ —Å–µ–≥–æ–¥–Ω—è?",
        "üåá –£—Ç—Ä–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∫–æ—Ñ–µ! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—à –Ω–æ–≤—ã–π '–°–æ–ª–Ω–µ—á–Ω—ã–π –±—Ä–∏–∑' —Å –Ω–æ—Ç–∫–∞–º–∏ —Ü–∏—Ç—Ä—É—Å–∞",
        "üê¶ –†–∞–Ω–Ω–∏–µ –ø—Ç–∞—à–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –ª—É—á—à–∏–π –∫–æ—Ñ–µ! –£ –Ω–∞—Å –∫–∞–∫ —Ä–∞–∑ —Å–≤–µ–∂–∞—è –æ–±–∂–∞—Ä–∫–∞",
        "üç™ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ö –≤–∞—à–µ–º—É –∫–æ—Ñ–µ —Å–µ–≥–æ–¥–Ω—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –ø–µ—á–µ–Ω—å–µ –¥–æ 10:00",
        "üåû –ù–∞—á–Ω–∏—Ç–µ –¥–µ–Ω—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî —Å –∏–¥–µ–∞–ª—å–Ω–æ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–∞–ø—É—á–∏–Ω–æ",
        "‚è∞ –ü—Ä–æ–≥–æ–Ω–∏—Ç–µ –æ—Å—Ç–∞—Ç–∫–∏ —Å–Ω–∞ —Å –Ω–∞—à–∏–º —Ñ–∏—Ä–º–µ–Ω–Ω—ã–º '–£—Ç—Ä–µ–Ω–Ω–∏–º –∑–∞—Ä—è–¥–æ–º'",
        "üå∏ –£—Ç—Ä–æ –ø–∞—Ö–Ω–µ—Ç —Å–≤–µ–∂–∏–º–∏ –∫—Ä—É–∞—Å—Å–∞–Ω–∞–º–∏ –∏ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–≤–∞—Ä–µ–Ω–Ω–æ–π –∞—Ä–∞–±–∏–∫–æ–π",
        "üìö –¢–∏—Ö–∏–µ —É—Ç—Ä–∞ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –∫–æ—Ñ–µ —Å –∫–Ω–∏–≥–æ–π –≤ –Ω–∞—à–µ–π —É—é—Ç–Ω–æ–π –∫–æ—Ñ–µ–π–Ω–µ",
        "üçØ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ú–µ–¥–æ–≤–∞—è —Ä–∞—Ñ-–ø–µ–Ω–∞ —Å–¥–µ–ª–∞–µ—Ç –≤–∞—à –¥–µ–Ω—å —Å–ª–∞—â–µ",
        "üå± –ü–µ—Ä–≤—ã–µ –ª—É—á–∏ —Å–æ–ª–Ω—Ü–∞ ‚Äî –ª—É—á—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –∫–æ—Ñ–µ —Å —Ç—Ä–∞–≤—è–Ω—ã–º–∏ –Ω–æ—Ç–∞–º–∏",
        "üöÄ –ó–∞—Ä—è–¥–∏—Ç–µ—Å—å —ç–Ω–µ—Ä–≥–∏–µ–π! –ù–∞—à –±–∞—Ä–∏—Å—Ç–∞ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–ª –Ω–æ–≤—ã–π —É—Ç—Ä–µ–Ω–Ω–∏–π –º–∏–∫—Å",
        "ü¶â –°–æ–≤—ã —Ç–æ–∂–µ –∑–∞—Å–ª—É–∂–∏–≤–∞—é—Ç –æ—Ç–ª–∏—á–Ω—ã–π –∫–æ—Ñ–µ –ø–æ —É—Ç—Ä–∞–º!",
        "üç´ –£—Ç—Ä–æ + —à–æ–∫–æ–ª–∞–¥–Ω—ã–π –ª–∞—Ç—Ç–µ = –∏–¥–µ–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ä—Ç –¥–Ω—è",
        "üßÅ –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ö –ª—é–±–æ–º—É –∫–æ—Ñ–µ –¥–æ 11:00 ‚Äî –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç –æ—Ç –∫–æ–Ω–¥–∏—Ç–µ—Ä–∞",
        "üåÖ –õ–æ–≤–∏—Ç–µ –º–æ–º–µ–Ω—Ç: —É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ—Ñ–µ —Å–æ —Å–∫–∏–¥–∫–æ–π 15% –Ω–∞ –≤—ã–Ω–æ—Å",
        "üçè –ö–æ—Ñ–µ —Å —è–±–ª–æ—á–Ω—ã–º —à—Ç—Ä—É–¥–µ–ª–µ–º? –î–∞ —ç—Ç–æ –∂–µ —É—Ç—Ä–æ –º–µ—á—Ç—ã!",
        "ü´ñ –†–∞–Ω–Ω–∏–µ —á–∞—Å—ã ‚Äî –≤—Ä–µ–º—è –¥–ª—è —Ç–∏—à–∏–Ω—ã –∏ –Ω–∞—Å—ã—â–µ–Ω–Ω–æ–≥–æ –ø—É—ç—Ä–∞",
        "ü•ê –ü—Ä–æ—Å–Ω—É–ª–∏—Å—å? –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –±—Ä–∏–æ—à—å —É–∂–µ –∂–¥—ë—Ç –≤–∞—Å –∫ –∫–æ—Ñ–µ",
        "‚ú® –ú–∞–≥–∏—è —É—Ç—Ä–∞ –≤ –∫–∞–∂–¥–æ–π —á–∞—à–∫–µ –Ω–∞—à–µ–≥–æ —Å–µ–∑–æ–Ω–Ω–æ–≥–æ –±–ª–µ–Ω–¥–∞",
        "üßò‚Äç‚ôÇÔ∏è –ú–µ–¥–∏—Ç–∞—Ü–∏—è —Å –∫–æ—Ñ–µ ‚Äî –Ω–∞—à —É—Ç—Ä–µ–Ω–Ω–∏–π —Ä–∏—Ç—É–∞–ª. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å!",
        "üçì –õ–µ—Ç–Ω–µ–µ —É—Ç—Ä–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∫–ª—É–±–Ω–∏—á–Ω–æ–≥–æ —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –±—Ä—é",
        "üìù –ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –¥–µ–Ω—å –∑–∞ —á–∞—à–∫–æ–π –∏–¥–µ–∞–ª—å–Ω–æ —Å–≤–∞—Ä–µ–Ω–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä-–∫–æ—Ñ–µ",
        "üõèÔ∏è –¢—Ä—É–¥–Ω–æ –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è? –ù–∞—à '–≠–Ω–µ—Ä–¥–∂–∞–π–∑–µ—Ä' —Ä–∞–∑–±—É–¥–∏—Ç –∑–∞ 3 –≥–ª–æ—Ç–∫–∞",
        "üåâ –í–∏–¥ –Ω–∞ –≥–æ—Ä–æ–¥ + —Å–≤–µ–∂–∏–π –∫–æ—Ñ–µ = –∏–¥–µ–∞–ª—å–Ω–æ–µ —É—Ç—Ä–æ",
        "üçå –ë–∞–Ω–∞–Ω–æ–≤—ã–π —Ä–∞—Ñ ‚Äî —Å–ª–∞–¥–∫–∏–π —Å–ø–æ—Å–æ–± –Ω–∞—á–∞—Ç—å –¥–µ–Ω—å",
        "ü•õ –ë–µ–∑–ª–∞–∫—Ç–æ–∑–Ω–æ–µ —É—Ç—Ä–æ? –£ –Ω–∞—Å –µ—Å—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã",
        "üßä –ñ–∞—Ä–∫–æ? –û—Ö–ª–∞–¥–∏—Ç–µ—Å—å —Å –Ω–∞—à–∏–º –Ω–æ–≤—ã–º –∞–π—Å-–∫–æ—Ñ–µ '–ú–æ—Ä–æ–∑–∫–æ'",
        "üñåÔ∏è –£—Ç—Ä–µ–Ω–Ω–µ–µ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –≤ –∫–∞–∂–¥–æ–π —á–∞—à–∫–µ –ª–∞—Ç—Ç–µ-–∞—Ä—Ç–∞",
        "‚õÖ –ö–∞–∫–æ–π –±—ã –Ω–∏ –±—ã–ª–∞ –ø–æ–≥–æ–¥–∞ ‚Äî —Ö–æ—Ä–æ—à–∏–π –∫–æ—Ñ–µ —Å–∫—Ä–∞—Å–∏—Ç –ª—é–±–æ–µ —É—Ç—Ä–æ"
    ],
    "day": [
        "üåû –î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í—Ä–µ–º—è –¥–ª—è –∫–æ—Ñ–µ-–±—Ä–µ–π–∫–∞ —Å —á–µ–º-—Ç–æ –≤–∫—É—Å–Ω–µ–Ω—å–∫–∏–º",
        "üèôÔ∏è –î–µ–Ω—å –≤ —Ä–∞–∑–≥–∞—Ä–µ! –ü–æ–¥–∑–∞—Ä—è–¥–∏—Ç–µ—Å—å –Ω–∞—à–∏–º '–û—Ñ–∏—Å–Ω—ã–º –±—É—Å—Ç–µ—Ä–æ–º'",
        "üçÇ –ò–¥–µ–∞–ª—å–Ω—ã–π –¥–Ω–µ–≤–Ω–æ–π –∫–æ—Ñ–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∞–∫–∏–º –∂–µ —Ç—ë–ø–ª—ã–º, –∫–∞–∫ –æ—Å–µ–Ω–Ω–µ–µ —Å–æ–ª–Ω—Ü–µ",
        "üïë –ü–æ—Å–ª–µ–æ–±–µ–¥–µ–Ω–Ω—ã–π –ª–∞—Ç—Ç–µ ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤ –¥–ª—è –±–æ–ª—å—à–æ–≥–æ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è",
        "üßâ –î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—à –Ω–æ–≤—ã–π –º–∞—Ç—á–∞-–ª–∞—Ç—Ç–µ —Å –∫–æ–∫–æ—Å–æ–≤—ã–º –º–æ–ª–æ–∫–æ–º",
        "üì± –û—Ç–≤–ª–µ–∫–∏—Ç–µ—Å—å –æ—Ç —ç–∫—Ä–∞–Ω–∞ ‚Äî –Ω–∞—Å—Ç–æ—è—â–∏–π –∫–æ—Ñ–µ –∂–¥—ë—Ç –≤–∞—Å!",
        "üçã –î–Ω–µ–≤–Ω–∞—è —Å–≤–µ–∂–µ—Å—Ç—å: —Ö–æ–ª–æ–¥–Ω—ã–π –∫–æ—Ñ–µ —Å –ª–∏–º–æ–Ω–æ–º –∏ –º—è—Ç–æ–π",
        "ü§ù –î–æ–±—Ä—ã–π –¥–µ–Ω—å! –°–µ–≥–æ–¥–Ω—è—à–Ω–∏–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –≥–æ—Å—Ç—å ‚Äî —ç—Ñ–∏–æ–ø—Å–∫–∞—è —Å–∏–¥–∞–º–æ",
        "üé® –ë–∞—Ä–∏—Å—Ç–∞ —Å–æ–∑–¥–∞—ë—Ç —à–µ–¥–µ–≤—Ä—ã ‚Äî –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –æ—Ü–µ–Ω–∏—Ç—å –¥–Ω–µ–≤–Ω–æ–µ –ª–∞—Ç—Ç–µ-–∞—Ä—Ç",
        "üõãÔ∏è –î–µ–Ω—å —Å–ª–∏—à–∫–æ–º –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–π? –£ –Ω–∞—Å –µ—Å—Ç—å —É—é—Ç–Ω—ã–π —É–≥–æ–ª–æ–∫ –∏ –º—è–≥–∫–∏–π –∫–∞–ø—É—á–∏–Ω–æ",
        "üç© –ö–æ—Ñ–µ + –ø–æ–Ω—á–∏–∫ = —Ñ–æ—Ä–º—É–ª–∞ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Ä—ã–≤–∞",
        "üåø –î–æ–±—Ä—ã–π –¥–µ–Ω—å! –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–π –∫–æ—Ñ–µ –∏–∑ –ü–µ—Ä—É —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø—Ä–∏–±—ã–ª",
        "üí° –Ø—Ä–∫–∏–µ –∏–¥–µ–∏ —Ç—Ä–µ–±—É—é—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ—Ñ–µ. –ß–µ–º –≤–∞—Å –≤–¥–æ—Ö–Ω–æ–≤–∏–º?",
        "üßä –ñ–∞—Ä–∞? –ù–∞—à '–õ–µ–¥—è–Ω–æ–π –≤–∏—Ö—Ä—å' –æ—Ö–ª–∞–¥–∏—Ç –ª—É—á—à–µ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä–∞",
        "üçØ –î–Ω–µ–≤–Ω–∞—è —Å–ª–∞–¥–æ—Å—Ç—å: –∫–∞—Ä–∞–º–µ–ª—å–Ω—ã–π –º–∞–∫–∏–∞—Ç–æ —Å —Å–æ–ª—ë–Ω–æ–π –ø–µ–Ω–∫–æ–π",
        "üìö –ö–æ—Ñ–µ –∏ –∫–Ω–∏–≥–∞ ‚Äî –ª—É—á—à–∏–µ —Å–ø—É—Ç–Ω–∏–∫–∏ –¥–æ–∂–¥–ª–∏–≤–æ–≥–æ –¥–Ω—è",
        "üé∂ –°–µ–≥–æ–¥–Ω—è –≤ –ø–ª–µ–π–ª–∏—Å—Ç–µ –∫–æ—Ñ–µ–π–Ω–∏ ‚Äî –¥–∂–∞–∑ –∏ –∞—Ä–æ–º–∞—Ç —Å–≤–µ–∂–µ–≥–æ –∫–æ—Ñ–µ",
        "ü•™ –î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ì–æ—Ç–æ–≤–∏–º —Å—ç–Ω–¥–≤–∏—á–∏ –∫ –≤–∞—à–µ–º—É –∫–æ—Ñ–µ –∑–∞ 5 –º–∏–Ω—É—Ç",
        "üíª –£—Å—Ç–∞–ª–∏ –æ—Ç –∑—É–º–∞? –ñ–∏–≤–æ–µ –æ–±—â–µ–Ω–∏–µ –∏ –∫–æ—Ñ–µ –∂–¥—É—Ç –≤–∞—Å!",
        "üç´ –®–æ–∫–æ–ª–∞–¥–Ω—ã–π —Ñ–æ–Ω—Ç–∞–Ω –≤ –≤–∞—à–µ–º —Ñ–ª—ç—Ç —É–∞–π—Ç ‚Äî –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–æ–≤–∏–Ω–∫—É!",
        "üåç –ü—É—Ç–µ—à–µ—Å—Ç–≤—É–π—Ç–µ –≤–∫—É—Å–∞–º–∏: —Å–µ–≥–æ–¥–Ω—è –ø—Ä–æ–±—É–µ–º –∫–æ—Ñ–µ –∏–∑ –†—É–∞–Ω–¥—ã",
        "üõéÔ∏è –î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ—Ñ–µ-—Å–æ–≤–µ—Ç–Ω–∏–∫ –∫ –≤–∞—à–∏–º —É—Å–ª—É–≥–∞–º",
        "üßÇ –ù–µ–æ–±—ã—á–Ω–æ: –∫–æ—Ñ–µ —Å –≥–∏–º–∞–ª–∞–π—Å–∫–æ–π —Å–æ–ª—å—é. –†–µ—à–∞–π—Ç–µ—Å—å –Ω–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç!",
        "üçë –ü–µ—Ä—Å–∏–∫–æ–≤—ã–π —Ö–æ–ª–æ–¥–Ω—ã–π —á–∞–π —Å –∫–æ—Ñ–µ? –î–∞, —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ!",
        "üñºÔ∏è –ò—Å–∫—É—Å—Å—Ç–≤–æ –≤ –¥–µ—Ç–∞–ª—è—Ö: –∫–∞–∫ –Ω–∞—à –±–∞—Ä–∏—Å—Ç–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ñ–µ –≤ –∫–∞—Ä—Ç–∏–Ω—ã",
        "üå∂Ô∏è –û—Å—Ç—Ä—ã–π –¥–µ–Ω—å? –ú–µ–∫—Å–∏–∫–∞–Ω—Å–∫–∏–π –∫–æ—Ñ–µ —Å —á–∏–ª–∏ –≤–∑–±–æ–¥—Ä–∏—Ç –ª—É—á—à–µ —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞",
        "üçå –ë–∞–Ω–∞–Ω–æ–≤—ã–π —Ö–ª–µ–± —Ç–æ–ª—å–∫–æ –∏–∑ –ø–µ—á–∏ ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä—Ç–Ω—ë—Ä –¥–ª—è –∞–º–µ—Ä–∏–∫–∞–Ω–æ",
        "üíé –î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ê–ª–º–∞–∑–Ω–∞—è –æ–±–∂–∞—Ä–∫–∞ ‚Äî –¥–ª—è –∏—Å—Ç–∏–Ω–Ω—ã—Ö —Ü–µ–Ω–∏—Ç–µ–ª–µ–π",
        "üßâ –ú–∞—Ç—á–∞, –∫—É—Ä–∫—É–º–∞, –∫–æ—Ñ–µ ‚Äî –≤—ã–±–∏—Ä–∞–π—Ç–µ —Å–≤–æ–π —Ü–≤–µ—Ç –¥–Ω—è!",
        "üéÅ –°–µ–∫—Ä–µ—Ç –¥–Ω—è: –Ω–∞–∑–æ–≤–∏—Ç–µ –∫–æ–¥ '–ö–û–§–ï2024' –∏ –ø–æ–ª—É—á–∏—Ç–µ –±–æ–Ω—É—Å"
    ],
    "evening": [
        "üåô –î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! –î–µ–∫–∞—Ñ —Ç–æ–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∫—É—Å–Ω—ã–º ‚Äî —É–±–µ–¥–∏—Ç–µ—Å—å —Å–∞–º–∏",
        "üåÜ –í–µ—á–µ—Ä–Ω–∏–µ –æ–≥–Ω–∏ –∑–∞–∂–∏–≥–∞—é—Ç—Å—è, –∞ –Ω–∞—à –∫–æ—Ñ–µ–≤–∞—Ä ‚Äî –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!",
        "üç∑ –ö–æ—Ñ–µ –∫–∞–∫ –≤–∏–Ω–æ: –≤–µ—á–µ—Ä–Ω–∏–π —Ä–∏—Å—Ç—Ä–µ—Ç—Ç–æ —Å —à–æ–∫–æ–ª–∞–¥–Ω—ã–º–∏ –Ω–æ—Ç–∞–º–∏",
        "üõãÔ∏è –£—é—Ç–Ω—ã–π –≤–µ—á–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —á–∞—à–∫–∏ –∫–∞–∫–∞–æ-–º–æ—á–∞ —Å –∑–µ—Ñ–∏—Ä–∫–∞–º–∏",
        "üé∂ –î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! –ñ–∏–≤–∞—è –º—É–∑—ã–∫–∞ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –≤–µ—á–µ—Ä–Ω–∏–π –∫–æ—Ñ–µ-–±–∞—Ä",
        "üçÇ –û—Å–µ–Ω–Ω–∏–π –≤–µ—á–µ—Ä? –ù–∞—à –ø—Ä—è–Ω—ã–π –ª–∞—Ç—Ç–µ —Å–æ–≥—Ä–µ–µ—Ç –ª—É—á—à–µ –ø–ª–µ–¥–∞",
        "üåÉ –ù–æ—á–Ω–æ–π –≥–æ—Ä–æ–¥ –ø—Ä–µ–∫—Ä–∞—Å–µ–Ω —Å –Ω–∞—à–∏–º '–ü–æ–ª—É–Ω–æ—á–Ω—ã–º —ç—Å–ø—Ä–µ—Å—Å–æ'",
        "üïØÔ∏è –°–≤–µ—á–∏, –ø–ª–µ–¥ –∏ —Ñ–∏—Ä–º–µ–Ω–Ω—ã–π –≥–ª–∏–Ω—Ç–≤–µ–π–Ω (–¥–∞, —Å –∫–æ—Ñ–µ —Ç–æ–∂–µ!)",
        "üç´ –®–æ–∫–æ–ª–∞–¥–Ω—ã–π —Ñ–æ–Ω–¥–∞–Ω –∫ –≤–µ—á–µ—Ä–Ω–µ–º—É –∫–æ—Ñ–µ ‚Äî –≥—Ä–µ—Ö –Ω–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å!",
        "üå† –ó–∞–≥–∞–¥—ã–≤–∞–π—Ç–µ –∂–µ–ª–∞–Ω–∏–µ –Ω–∞–¥ —á–∞—à–∫–æ–π –Ω–∞—à–µ–≥–æ '–ó–≤—ë–∑–¥–Ω–æ–≥–æ –∫–∞–ø—É—á–∏–Ω–æ'",
        "üßâ –í–µ—á–µ—Ä–Ω–∏–π –¥–µ—Ç–æ–∫—Å: –∑–æ–ª–æ—Ç–æ–π –ª–∞—Ç—Ç–µ —Å –∫—É—Ä–∫—É–º–æ–π –∏ –∏–º–±–∏—Ä—ë–º",
        "üìö –î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! –ö–æ—Ñ–µ –∏ —Ç–∏—à–∏–Ω–∞ ‚Äî –ª—É—á—à–∏–µ —Å–ø—É—Ç–Ω–∏–∫–∏ —á—Ç–µ–Ω–∏—è",
        "üçé –Ø–±–ª–æ—á–Ω—ã–π –∫—Ä–∞–º–±–ª –∫ –≤–∞—à–µ–º—É –≤–µ—á–µ—Ä–Ω–µ–º—É –∫–æ—Ñ–µ ‚Äî –ø—Ä–æ—Å—Ç–æ –æ–±—ä–µ–¥–µ–Ω–∏–µ",
        "üé≠ –í–µ—á–µ—Ä —Ç–∞–π–Ω: –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞—à '–®–∞—Ö–º–∞—Ç–Ω—ã–π –º–æ–∫–∫–æ' ‚Äî —á—ë—Ä–Ω–æ-–±–µ–ª—ã–π –∫–∞–∫ –Ω–æ—á—å",
        "üßÄ –°—ã—Ä–Ω–∞—è —Ç–∞—Ä–µ–ª–∫–∞ + –∫–æ—Ñ–µ = –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –∏–¥–µ–∞–ª—å–Ω—ã–π –≤–µ—á–µ—Ä",
        "üåú –õ—É–Ω–Ω—ã–π —Å–≤–µ—Ç –ª—å—ë—Ç—Å—è –≤ —á–∞—à–∫—É –Ω–∞—à–µ–≥–æ –Ω–æ–≤–æ–≥–æ '–ù–æ–∫—Ç—é—Ä–Ω' –±–ª–µ–Ω–¥–∞",
        "üçØ –ú–µ–¥–æ–≤–∞—è —Ä–µ–ª–∞–∫—Å–∞—Ü–∏—è: –≤–µ—á–µ—Ä–Ω–∏–π —Ä–∞—Ñ —Å –ª–∞–≤–∞–Ω–¥–æ–≤—ã–º —Å–∏—Ä–æ–ø–æ–º",
        "üñºÔ∏è –ò—Å–∫—É—Å—Å—Ç–≤–æ –≤–µ—á–µ—Ä–∞: —Ä–∏—Å—É–µ–º –∫–æ—Ñ–µ –Ω–∞ –º–æ–ª–æ—á–Ω–æ–π –ø–µ–Ω–∫–µ –ø—Ä–∏ —Å–≤–µ—á–∞—Ö",
        "üé• –ö–∏–Ω–æ–≤–µ—á–µ—Ä? –ù–∞—à –ø–æ–ø–∫–æ—Ä–Ω —Å –∫–æ—Ñ–µ–π–Ω–æ–π –∫–∞—Ä–∞–º–µ–ª—å—é —É–∂–µ –∂–¥—ë—Ç",
        "üåπ –†–æ–º–∞–Ω—Ç–∏—á–Ω—ã–π –≤–µ—á–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ä–æ–∑–æ–≤–æ–≥–æ –ª–∞—Ç—Ç–µ —Å –ª–µ–ø–µ—Å—Ç–∫–∞–º–∏",
        "üçå –ë–∞–Ω–∞–Ω–æ–≤—ã–π —Ö–ª–µ–± –ø–ª—é—Å –∫–æ—Ñ–µ ‚Äî –≤–µ—á–µ—Ä–Ω–µ–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –±–µ–∑ –≤–∏–Ω—ã",
        "üßä –•–æ–ª–æ–¥–Ω—ã–π –≤–µ—á–µ—Ä–Ω–∏–π –±—Ä—é —Å –≤–∏—à–Ω—ë–≤—ã–º –ª—å–¥–æ–º ‚Äî –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –≤–∫—É—Å–Ω–æ!",
        "üéµ –î–∂–∞–∑–æ–≤—ã–µ –≤–µ—á–µ—Ä–∞ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∫–æ—Ñ–µ–π–Ω–æ–π –∫–∞—Ä—Ç–æ–π",
        "üçÅ –ö–ª–µ–Ω–æ–≤—ã–π –ª–∞—Ç—Ç–µ ‚Äî –∫–∞–∫ –æ—Å–µ–Ω–Ω–∏–π –≤–µ—á–µ—Ä –≤ –í–µ—Ä–º–æ–Ω—Ç–µ",
        "üõÅ –í–µ—á–µ—Ä–Ω—è—è –≤–∞–Ω–Ω–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –≤–∫—É—Å–∞: –∫–æ—Ñ–µ —Å –≤–∞–Ω–∏–ª—å—é –∏ –∫–∞—Ä–¥–∞–º–æ–Ω–æ–º",
        "üé≤ –ò–≥—Ä–æ–≤–æ–π –≤–µ—á–µ—Ä? –ù–∞—à '–†—É–ª–µ—Ç—Ç–µ' –∫–æ—Ñ–µ —Å —Å—é—Ä–ø—Ä–∏–∑–æ–º –≤–Ω—É—Ç—Ä–∏!",
        "üçä –ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Ä–∞—Ñ ‚Äî —Ü–∏—Ç—Ä—É—Å–æ–≤—ã–π –∑–∞–∫–∞—Ç –≤ –≤–∞—à–µ–π —á–∞—à–∫–µ",
        "üåå –ì–∞–ª–∞–∫—Ç–∏–∫–∞ –≤ —á–∞—à–∫–µ: –Ω–∞—à –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–µ—á–µ—Ä–Ω–∏–π –Ω–∞–ø–∏—Ç–æ–∫ '–ú–ª–µ—á–Ω—ã–π –ø—É—Ç—å'",
        "üç™ –î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! –ü–µ—á–µ–Ω—å–µ —Å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è–º–∏ –∫ –∫–æ—Ñ–µ ‚Äî —É–∑–Ω–∞–π—Ç–µ, —á—Ç–æ –∂–¥—ë—Ç –∑–∞–≤—Ç—Ä–∞",
        "üí§ –°–ª–∞–¥–∫–∏—Ö —Å–Ω–æ–≤! –ù–æ —Å–Ω–∞—á–∞–ª–∞ ‚Äî –¥–µ–∫–∞—Ñ —Å –º–∏–Ω–¥–∞–ª—å–Ω—ã–º –º–æ–ª–æ–∫–æ–º –∏ –º—ë–¥–æ–º"
    ]
}


def generate_day_or_night(now_time: int):
    if 5 < now_time < 13:
        return random.choice(coffee_greetings["morning"])
    elif 12 < now_time < 19:
        return random.choice(coffee_greetings["day"])
    else:
        return random.choice(coffee_greetings["evening"])


class Prompt:
    @staticmethod
    def use_system_prompt(month):
        system_prompt = (
            f"–¢—ã ‚Äî —ç–∫—Å—Ü–µ–Ω—Ç—Ä–∏—á–Ω—ã–π –∞—Å—Ç—Ä–æ–ª–æ–≥-–±–∞—Ä–∏—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∏–¥–∏—Ç —Å—É–¥—å–±—É –≤ –∫–æ—Ñ–µ–π–Ω—ã—Ö –ø—è—Ç–Ω–∞—Ö. "
            f"–ü–∏—à–∏ –≥–æ—Ä–æ—Å–∫–æ–ø—ã –¥–ª—è {month} —Å —é–º–æ—Ä–æ–º, –∫–æ—Ñ–µ–π–Ω—ã–º–∏ –∫–∞–ª–∞–º–±—É—Ä–∞–º–∏ –∏ –Ω–∞–º—ë–∫–æ–º –Ω–∞ –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞. "
            f"–ò–∑–±–µ–≥–∞–π –±–∞–Ω–∞–ª—å–Ω–æ—Å—Ç–µ–π! –ü—Ä–∏–º–µ—Ä —É–¥–∞—á–Ω–æ–π —à—É—Ç–∫–∏: "
            f"'–°–∫–æ—Ä–ø–∏–æ–Ω, —Å–µ–≥–æ–¥–Ω—è —Ç–≤–æ–π —ç—Å–ø—Ä–µ—Å—Å–æ –±—É–¥–µ—Ç –Ω–∞—Å—Ç–æ–ª—å–∫–æ –∫—Ä–µ–ø–∫–∏–º, —á—Ç–æ –¥–∞–∂–µ —Ç–µ–Ω—å –æ—Ç —á–∞—à–∫–∏ —Å—Ç–∞–Ω–µ—Ç —Ç–≤–æ–∏–º –ª–∏—á–Ω—ã–º —Ç–µ–ª–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–º'. "
            f"–§–æ—Ä–º–∞—Ç: —Å—Ç—Ä–æ–≥–æ –ø–æ –¥–Ω—è–º, —Å 1 –ø–æ 30/31 {month}. –ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π —á–∏—Å–ª–∞!"
        )
        return system_prompt

    @staticmethod
    def use_user_prompt(zodiac: str, month: int, year: int):
        user_prompt = (
            f"–ù–∞–ø–∏—à–∏ –∫–æ—Ñ–µ–π–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è {zodiac} –Ω–∞ –≤—Å–µ –¥–Ω–∏ –º–µ—Å—è—Ü–∞ {month} {year}. "
            f"–ü—Ä–∏–º–µ—Ä—ã —Å—Ç–∏–ª—è, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–µ–Ω:\n"
            f"-'–í —Ç–≤–æ–µ–π —á–∞—à–∫–µ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –ø—Ä–æ—Å—Ç–æ –∞–º–µ—Ä–∏–∫–∞–Ω–æ, –∞ –≤–∑—Ä—ã–≤–Ω–∞—è —Å–º–µ—Å—å –∏–∑ 3 –ø–æ—Ä—Ü–∏–π —ç—Å–ø—Ä–µ—Å—Å–æ ‚Äî –∏–º–µ–Ω–Ω–æ —Å—Ç–æ–ª—å–∫–æ —Ä–∞–∑ "
            f"—Ç—ã —Å–µ–≥–æ–¥–Ω—è —Å–∫–∞–∂–µ—à—å ¬´–Ø –∂–µ –≥–æ–≤–æ—Ä–∏–ª(–∞)!¬ª'\n"
            f"-'–ö–æ—Ñ–µ–π–Ω–∞—è –≥—É—â–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç: –Ω–µ –ø–µ–π –ª–∞—Ç—Ç–µ –ø–æ—Å–ª–µ –ø–æ–ª—É–Ω–æ—á–∏, –∏–Ω–∞—á–µ –ø—Ä–æ—Å–Ω—ë—à—å—Å—è —Å –∏–¥–µ–µ–π –∫—É–ø–∏—Ç—å –∂–∏—Ä–∞—Ñ–∞'\n"
            f"-'–ó—ë—Ä–Ω–∞ —Å—É–ª—è—Ç: —Å–µ–≥–æ–¥–Ω—è —Ç—ã –Ω–∞–π–¥—ë—à—å —Ä–æ–≤–Ω–æ 47% —Ç–æ–≥–æ, —á—Ç–æ –∏—â–µ—à—å. –û—Å—Ç–∞–ª—å–Ω–æ–µ —Å–ø—Ä—è—Ç–∞–Ω–æ –≤ –∫–æ—Ñ–µ–º–∞—à–∏–Ω–µ –≤—Å–µ–ª–µ–Ω–Ω–æ–π'\n\n"
            f"–ò–∑–±–µ–≥–∞–π —à–∞–±–ª–æ–Ω–Ω—ã—Ö —Ñ—Ä–∞–∑! –î–æ–±–∞–≤—å –æ—Ç—Å—ã–ª–∫—É –∫ —Å–µ–∑–æ–Ω—É –∏ –∑–Ω–∞–∫—É –∑–æ–¥–∏–∞–∫–∞ —á–µ—Ä–µ–∑ –∫–æ—Ñ–µ–π–Ω—É—é –ø—Ä–∏–∑–º—É."
            f"–û—Ñ–æ—Ä–º–∏ –æ—Ç–≤–µ—Ç –≤ –≤–∏–¥–µ:\n\n1: –ö–æ—Ñ–µ–π–Ω–∞—è –≥—É—â–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç: –Ω–µ –ø–µ–π –ª–∞—Ç—Ç–µ –ø–æ—Å–ª–µ –ø–æ–ª—É–Ω–æ—á–∏, –∏–Ω–∞—á–µ –ø—Ä–æ—Å–Ω—ë—à—å—Å—è —Å –∏–¥–µ–µ–π –∫—É–ø–∏—Ç—å –∂–∏—Ä–∞—Ñ–∞"
            f"\n2: –ó—ë—Ä–Ω–∞ —Å—É–ª—è—Ç: —Å–µ–≥–æ–¥–Ω—è —Ç—ã –Ω–∞–π–¥—ë—à—å —Ä–æ–≤–Ω–æ 47% —Ç–æ–≥–æ, —á—Ç–æ –∏—â–µ—à—å. –û—Å—Ç–∞–ª—å–Ω–æ–µ —Å–ø—Ä—è—Ç–∞–Ω–æ –≤ –∫–æ—Ñ–µ–º–∞—à–∏–Ω–µ –≤—Å–µ–ª–µ–Ω–Ω–æ–π"
            f"–ü–æ—Å–ª–µ –¥–≤–æ–µ—Ç–æ—á–∏—è —Å—Ä–∞–∑—É —Å–ª–µ–¥—É–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤."
                       )
        return user_prompt


class BaristaPrompt:
    @staticmethod
    def use_system_prompt():
        system_prompt = (
            f"–¢—ã –ª—É—á—à–∏–π –≤ –º–∏—Ä–µ –±–∞—Ä–∏—Å—Ç–∞, —É —Ç–µ–±—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–æ–±—Ä—ã–π —é–º–æ—Ä, —Ç—ã –¥—Ä—É–∂–µ–ª—é–±–µ–Ω –∏ —Å–æ –≤—Å–µ–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –Ω–∞ –¢—ã. "
            f"–°–≤–æ–∏–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ–º –∏ —É–ª—ã–±–∫–æ–π —Ç—ã –ø–æ–¥–Ω–∏–º–∞–µ—à—å –≤—Å–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–∞–∂–µ –≤ –ø–ª–æ—Ö–∏–µ –¥–Ω–∏."
        )
        return system_prompt

    @staticmethod
    def use_user_prompt():
        system_prompt = (
            f"–ù–∞–ø–∏—à–∏ —Ö–æ—Ä–æ—à–µ–µ –ø–æ–∂–µ–ª–∞–Ω–∏–µ —Å–≤–æ–µ–º—É –∫–ª–∏–µ–Ω—Ç—É. –ò–∑–±–µ–≥–∞–π —É–∫–∞–∑–∞–Ω–∏—è –ø–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –ø–æ–ª—É."
            f"–ö–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —É–π—Ç–∏ –æ—Ç —Ç–µ–±—è —á—Ç–æ–±—ã –µ—â–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∑–∞ —á–∞—à–µ—á–∫–æ–π —Ö–æ—Ä–æ—à–µ–≥–æ –∫–æ—Ñ–µ –∏ –æ—Ç–ª–∏—á–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è."
            f"–ü–æ–∂–µ–ª–∞–Ω–∏—è –ø–∏—à–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –±–µ–∑ –æ—à–∏–±–æ–∫, –≤—Å–µ–≥–æ 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è."
            f"–ù–∞–ø–∏—à–∏ —Ç–æ–ª—å–∫–æ –ø–æ–∂–µ–ª–∞–Ω–∏–µ –±–µ–∑ –≤—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ª–æ–≤ –≤ —Å—Ç–∏–ª–µ '–õ–æ–≤–∏ —Ç—ë–ø–ª—É—é –Ω–æ—Ç–∫—É –Ω–∞ –¥–æ—Ä–æ–∂–∫—É' –∏ –±–µ–∑ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏–π."
        )
        return system_prompt


class AiAssistent:
    _client = None

    @classmethod
    def client(cls):
        if cls._client is None:
            cls._client = OpenAI(
                base_url="https://openrouter.ai/api/v1",
                api_key=API_KEY,
            )
        return cls._client

    @classmethod
    def get_completion(cls, system_prompt: str, user_prompt: str, max_retries: int = 5) -> str:
        """ –ü–æ–ª—É—á–∞–µ–º –≥–æ—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç –∫–æ—Ñ–µ–π–Ω–æ–≥–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è """
        # –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —á–∏—Å–ª–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –∏–∑-–∑–∞ RateLimitError
        retry_count = 0

        while retry_count <= max_retries:
            try:
                help_ai_logger.info(f'–ì–µ–Ω–µ—Ä–∏—Ä—É—é –æ—Ç–≤–µ—Ç (–ø–æ–ø—ã—Ç–∫–∞ {retry_count + 1})')
                completion = cls.client().chat.completions.create(
                    extra_headers={
                        "HTTP-Referer": "https://t.me/fragrant_coffee_bot",
                        "X-Title": "CoffeeBot"
                    },
                    model="deepseek/deepseek-r1-0528:free",
                    messages=[
                        {"role": "system", "content": system_prompt},
                        {"role": "user", "content": user_prompt},
                    ]
                )
                help_ai_logger.info('–ü–æ–ª—É—á–∏–ª –æ—Ç–≤–µ—Ç')
                return completion.choices[0].message.content

            except RateLimitError as e:
                retry_count += 1
                if retry_count > max_retries:
                    help_ai_logger.error(f"–ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏({max_retries})")
                    raise

            except Exception as ex:
                help_ai_logger.exception(f'–û—à–∏–±–∫–∞ –≤ AiAssistent: {ex}')
